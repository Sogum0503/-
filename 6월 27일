# 어제 스터디 관련 궁금증 (ORDER BY)

[궁금] ORDR BY절에서 기준 컬럼에 대해 추가적인 가공이 가능한가? 

[해걸] 
order by 컬럼명 + n은 컬럼명 + n 으로 연산이 된 데이터를 기준으로 정렬하라는 의미.
예를 들어 값이 1,2,3 ...인 컬럼 A에 대해 order by A+1라고 쓰게 되면 아래와 같은 순서로 쿼리가 실행된다

1. A+1 계산 : 2,3,4....
2. 1에서 계산 된 데이터를 기준으로 정렬 

어제 내가 혼자서 돌려 본 쿼리에서 정렬이 무너진 이유는, string date type 컬럼에 연산 작업을 진행했기 때문..

select max(order_id) - 1
from orders 

쿼리를 실행하게 되면 -1, -1, -1..의 값이 출력이 되고, 모든 값이 똑같기 때문에 ASC, DESC정렬이 불가능 하기 때문에 order by를 하지 않았을 때와 동일한 순서로 결과값이 출력된다.

또한, string 타입이 아닌 datetime/number type 컬럼에 +- n을 하게 되면 모든 데이터가 똑같이 커지거나 작아지기 때문에 최종적인 정렬 결과에 영향을 주지 않는다. 

동일한 맥락으로 number, datetime 형식에 *-1을 하게되면 desc와 같은 성능을 보이게 된다. 

[결론]
order by절에 컬럼 값에 대한 추가적인 연산 작업은 들어올 수 있다.
하지만 그게 출력되는 값에 영향을 주는 것은 아니다.

# 선미님 답변 
ORDER BY 절에서 집계 함수를 쓸 일은 없어요. 
GROUP BY 연산 결과를 정렬에 사용하는 있는데 dapart38 님이 쓰신 쿼리에서 customers 컬럼을 ORDER BY 에 쓰실 수 있습니다.
가장 큰 recency 값을 가져오고자 할 때에는 SELECT 절에서 MAX() 함수를 쓰시면 되고, 
customers 같이 집계 연산의 결과가 되는 컬럼의 가장 큰 값을 가지고오고 싶다면 서브쿼리를 쓰셔야 하는데요. 

# 리트코드 풀이 

1141. User Activity for the Past 30 Days I
1142. User Activity for the Past 30 Days II
1148. Article Views I
