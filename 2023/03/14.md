## leetcode
### 1555. Bank Account Summary
```sql
# 각 고객의 신용 한도 초과 여부를 출력하시오 

WITH temp AS(
    SELECT paid_by,
            SUM(amount) AS sum_amount
    FROM (SELECT paid_by,
                (CASE WHEN paid_by THEN -amount END) AS amount
         FROM Transactions 
         UNION ALL
         SELECT paid_to,
                (CASE WHEN paid_to THEN amount END) AS amount
         FROM Transactions) x 
    GROUP BY paid_by 
)


SELECT user_id,
      user_name,
      credit,
     (CASE WHEN credit > 0 THEN 'No' ELSE 'Yes' END) AS credit_limit_breached
FROM (SELECT user_id,
            user_name,
            ifnull(credit + sum_amount, credit) AS credit
    FROM Users U
        LEFT JOIN temp T ON U.user_id = T.paid_by) AS cte 
```
